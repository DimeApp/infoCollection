<!DOCTYPE html>
<html lang="en" data-ng-app="myApp">
  <head>
    <title>Dime</title>
    <link type="text/css" rel="stylesheet" href="materialize/css/materialize.css"  media="screen,projection"/>
    <script type="text/javascript" src="js/jquery-3.2.0.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/js/materialize.min.js"></script>
    <script type="text/javascript" src="http://code.angularjs.org/1.2.25/angular.min.js"></script>
    <script src="https://code.angularjs.org/2.0.0-beta.0/http.dev.js"></script>
    <script type="text/javascript" src="js/modules/promise-tracker.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
  </head>

  <body class="dime-gradient">
  <div ng-app="myApp" ng-controller="formCtrl">
    <!-- Logo -->
    <div align="center">
      <img src="assets/dimeBanner.png" alt="Header Logo" class="responsive-img" width="600">
    </div>
    <!--  First Name, Last Name, Email -->
    <div class="row">
      <div class="col s4"></div>
      <div class="col s4">
        <div class="card">
          <div class="card-content">
            <form novalidate>
              First Name:<br>
              <input type="text" ng-model="user.firstName"><br>
              Last Name:<br>
              <input type="text" ng-model="user.lastName">
              Email:<br>
              <input type="text" ng-model="user.email" required><br>
              <br>
              <div class="col s4"></div>
              <button class="green accent-3 btn col s4" ng-click="postToStoreEmail()">Submit</button>
            </form>
          </div>
        </div>
      </div>
      <div class="col s4"></div>
    </div>
    <!-- All the other stuff -->
    <div class="row">
      <div class="col s4"></div>
      <div class="col s4">
        <div class="card">
          <div class="card-content">
            <form novalidate>
              What was your total income, before taxes, during the past year?<br>
              <p>
               <input class="with-gap" name="incomeRange" ng-model="user.incomeRange" value="Less than $25,000" type="radio" id="incomeBracket1" />
               <label for="incomeBracket1">Less than $25,000</label>
              </p>
              <p>
               <input class="with-gap" name="incomeRange" ng-model="user.incomeRange" value="$25,000 to $34,999" type="radio" id="incomeBracket2" />
               <label for="incomeBracket2">$25,000 to $34,999</label>
              </p>
              <p>
               <input class="with-gap" name="incomeRange" ng-model="user.incomeRange" value="$35,000 to $49,999" type="radio" id="incomeBracket3" />
               <label for="incomeBracket3">$35,000 to $49,999</label>
              </p>
              <p>
               <input class="with-gap" name="incomeRange" ng-model="user.incomeRange" value="$50,000 to $74,999" type="radio" id="incomeBracket4" />
               <label for="incomeBracket4">$50,000 to $74,999</label>
              </p>
              <p>
               <input class="with-gap" name="incomeRange" ng-model="user.incomeRange" value="$75,000 to $99,999" type="radio" id="incomeBracket5" />
               <label for="incomeBracket5">$75,000 to $99,999</label>
              </p>
              <p>
               <input class="with-gap" name="incomeRange" ng-model="user.incomeRange" value="$100,000 or more" type="radio" id="incomeBracket6" />
               <label for="incomeBracket6">$100,000 or more</label>
              </p>
              <br />
              How much do you think you could afford to donate each month?<br>
              <input type="text" ng-model="user.monthlyDonation">
              Do you currently make regular donations to any charitable organizations?<br>
              <p>
               <input class="with-gap" name="doesDonate" ng-model="user.doesDonate" value="Yes" type="radio" id="yesDonate" />
               <label for="yesDonate">Yes</label>
              </p>
              <p>
               <input class="with-gap" name="doesDonate" ng-model="user.doesDonate" value="No" type="radio" id="noDonate" />
               <label for="noDonate">No</label>
              </p>
              <br />
              Name a few of your favorite charities:<br>
              <input type="text" ng-model="user.charityOne"><br>
              <input type="text" ng-model="user.charityTwo"><br>
              <input type="text" ng-model="user.charityThree"><br>
              About how many times do you use your debit/credit card a day?<br>

              <input type="text" ng-model="user.numOfTrans"><br>
              What is your employment status?<br>
              <p>
                <input class="with-gap" name="employment" ng-model="user.employmentStatus" value="Student" type="radio" id="student" />
                <label for="student">Student</label>
              </p>
              <p>
                <input class="with-gap" name="employment" ng-model="user.employmentStatus" value="Employed" type="radio" id="employed" />
                <label for="employed">Employed</label>
              </p>
              <p>
                <input class="with-gap" name="employment" ng-model="user.employmentStatus" value="Unemployed" type="radio" id="unemployed" />
                <label for="unemployed">Unemployed</label>
              </p>
              <br />
              Would You Use Dime?<br>
              <p>
                <input class="with-gap" name="wouldYouUse" ng-model="user.wouldYouUseDime" value="Yes" type="radio" id="yesUse" />
                <label for="yesUse">Of Course!</label>
              </p>
              <p>
                <input class="with-gap" name="wouldYouUse" ng-model="user.wouldYouUseDime" value="Undecided" type="radio" id="undecidedUse" />
                <label for="unsureUse">Undecided</label>
              </p>
              <p>
                <input class="with-gap" name="wouldYouUse" ng-model="user.wouldYouUseDime" value="No" type="radio" id="noUse" />
                <label for="noUse">No, I do not like to help those in need. Not one bit.</label>
              </p>
              <br>
              <div class="col s4"></div>
              <button class="green accent-3 btn col s4" ng-click="postToStoreAnon()">Submit</button>
            </form>
          </div>
        </div>
      </div>
      <div class="col s4"></div>
    </div>
<br />
<br />
<br />
</div>

  <script>
  var app = angular.module('myApp', []);
  app.controller('formCtrl', function($scope) {
      $scope.master = {firstName:"Optional", lastName:"Optional"};
      $scope.reset = function() {
          $scope.user = angular.copy($scope.master);
      };
      $scope.reset();
      $scope.postToStoreEmail = function() {
        // var request = new XMLHttpRequest();
        // request.open('POST', 'https://sleepy-hamlet-74920.herokuapp.com/parse/functions/storeEmailName?firstName=Heyoboba&lastName=smith&email=shoot@gmail.com', true);
        // request.setRequestHeader('X-Parse-Application-Id',"dime");
        // request.post(data);

        fetch('https://sleepy-hamlet-74920.herokuapp.com/parse/functions/storeEmailName?firstName='+$scope.user.firstName+'&lastName='+$scope.user.lastName+'&email='+$scope.user.email, {
          method: 'POST',
          headers: {
            'X-Parse-Application-Id': 'dime',
            'Content-Type': 'application/json',
          },

        })
      };

      $scope.postToStoreAnon = function() {
        fetch('https://sleepy-hamlet-74920.herokuapp.com/parse/functions/anonInfo?incomeRange='+$scope.user.incomeRange+'&monthlyDonation='+$scope.user.monthlyDonation+'&doesDonate='+$scope.user.doesDonate+'&charityOne='+$scope.user.charityOne+'&charityTwo='+$scope.user.charityTwo+'&charityThree='+$scope.user.charityThree+'&numOfTrans='+$scope.user.numOfTrans+'&employmentStatus='+$scope.user.employmentStatus+'&wouldYouUseDime='+$scope.user.wouldYouUseDime, {
          method: 'POST',
          headers: {
            'X-Parse-Application-Id': 'dime',
            'Content-Type': 'application/json',
          },
        })
      };

      $scope.postToAnon = function() {
        fetch('https://sleepy-hamlet-74920.herokuapp.com/parse/functions/storeEmailName?firstName='+$scope.user.firstName+'&lastName='+$scope.user.lastName+'&email='+$scope.user.email, {
          method: 'POST',
          headers: {
            'X-Parse-Application-Id': 'dime',
            'Content-Type': 'application/json',
          },

        })
      };
  });

      $(document).ready(function() {
        $('select').material_select();
      });
  </script>

  </body>
</html>
