<!DOCTYPE html>
<html lang="en" data-ng-app="myApp">
  <head>
    <title>Dime</title>
    <link type="text/css" rel="stylesheet" href="materialize/css/materialize.css"  media="screen,projection"/>
    <script type="text/javascript" src="http://code.angularjs.org/1.2.25/angular.min.js"></script>
    <script src="https://code.angularjs.org/2.0.0-beta.0/http.dev.js"></script>
    <script type="text/javascript" src="js/modules/promise-tracker.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
  </head>

  <body class="dime-gradient">
  <div ng-app="myApp" ng-controller="formCtrl">
    <!-- Logo -->
    <div align="center">
      <img src="assets/dimeBanner.png" alt="Header Logo" class="responsive-img" width="600">
    </div>
    <!--  First Name, Last Name, Email -->
    <div class="row">
      <div class="col s4"></div>
      <div class="col s4">
        <div class="card">
          <div class="card-content">
            <form novalidate>
              First Name:<br>
              <input type="text" ng-model="user.firstName"><br>
              Last Name:<br>
              <input type="text" ng-model="user.lastName">
              Email:<br>
              <input type="text" ng-model="user.email" required><br>
              <br>
              <div class="col s4"></div>
              <button class="green accent-3 btn col s4" ng-click="postToStoreEmail()">Submit</button>
            </form>
          </div>
        </div>
      </div>
      <div class="col s4"></div>
    </div>
    <!-- All the other stuff -->
    <div class="row">
      <div class="col s4"></div>
      <div class="col s4">
        <div class="card">
          <div class="card-content">
            <form novalidate>
              Income Range:<br>
              <input type="text" ng-model="user.incomeRange"><br>
              Monthly Donation:<br>
              <input type="text" ng-model="user.monthlyDonation">
              Does Donate:<br>
              <input type="text" ng-model="user.doesDonate"><br>
              Charities:<br>
              <input type="text" ng-model="user.charities"><br>
              Number of Transactions:<br>
              <input type="text" ng-model="user.numOfTrans"><br>
              Employment Status:<br>
              <input type="text" ng-model="user.employmentStatus"><br>
              Would You Use Dime:<br>
              <input type="text" ng-model="user.wouldYouUseDime"><br>
              <br>
              <div class="col s4"></div>
              <button class="green accent-3 btn col s4" ng-click="postToStoreAnon()">Submit</button>
            </form>
          </div>
        </div>
      </div>
      <div class="col s4"></div>
    </div>
<br />
<br />
<br />
</div>

  <script>
  var app = angular.module('myApp', []);
  app.controller('formCtrl', function($scope) {
      $scope.master = {firstName:"Optional", lastName:"Optional"};
      $scope.reset = function() {
          $scope.user = angular.copy($scope.master);
      };
      $scope.reset();
      $scope.postToStoreEmail = function() {
        // var request = new XMLHttpRequest();
        // request.open('POST', 'https://sleepy-hamlet-74920.herokuapp.com/parse/functions/storeEmailName?firstName=Heyoboba&lastName=smith&email=shoot@gmail.com', true);
        // request.setRequestHeader('X-Parse-Application-Id',"dime");
        // request.post(data);

        fetch('https://sleepy-hamlet-74920.herokuapp.com/parse/functions/storeEmailName?firstName='+$scope.user.firstName+'&lastName='+$scope.user.lastName+'&email='+$scope.user.email, {
          method: 'POST',
          headers: {
            'X-Parse-Application-Id': 'dime',
            'Content-Type': 'application/json',
          },

        })
      };

      $scope.postToStoreAnon = function() {
        fetch('https://sleepy-hamlet-74920.herokuapp.com/parse/functions/anonInfo?incomeRange='+$scope.user.incomeRange+'&monthlyDonation='+$scope.user.monthlyDonation+'&doesDonate='+$scope.user.doesDonate+'&charities='+$scope.user.charities+'&numOfTrans='+$scope.user.numOfTrans+'&employmentStatus='+$scope.user.employmentStatus+'&wouldYouUseDime='+$scope.user.wouldYouUseDime, {
          method: 'POST',
          headers: {
            'X-Parse-Application-Id': 'dime',
            'Content-Type': 'application/json',
          },
        })
      };


      $scope.postToAnon = function() {
        fetch('https://sleepy-hamlet-74920.herokuapp.com/parse/functions/storeEmailName?firstName='+$scope.user.firstName+'&lastName='+$scope.user.lastName+'&email='+$scope.user.email, {
          method: 'POST',
          headers: {
            'X-Parse-Application-Id': 'dime',
            'Content-Type': 'application/json',
          },

        })
      };
  });

  </script>

  </body>
</html>
